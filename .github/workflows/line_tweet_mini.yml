name: LINE Auto Tweet

on:
  schedule:
    - cron: "*/5 * * * *"  # 5åˆ†ã”ã¨ã«å®Ÿè¡Œ

jobs:
  send_message:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.9"

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    - name: Debug GitHub Secrets
      run: |
        echo "ğŸ“Œ DEBUG: Checking environment variables..."
        echo "ğŸ“Œ DEBUG: LINE_GROUP_ID=${{ secrets.LINE_GROUP_ID }}"  # `groupId` ã‚’ãƒ­ã‚°ã«å‡ºåŠ›
      env:
        LINE_GROUP_ID: ${{ secrets.LINE_GROUP_ID }}

    - name: Send LINE message
      env:
        LINE_CHANNEL_ACCESS_TOKEN2: ${{ secrets.LINE_CHANNEL_ACCESS_TOKEN2 }}
        LINE_GROUP_ID: ${{ secrets.LINE_GROUP_ID }}
      run: python src/routes/main_test_mini.py
